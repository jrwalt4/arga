(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.arga = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function Dict(t,e){return this instanceof Dict?(e=e||Function.noop,this.getDefault=e,this.store=Object.create(null),this.length=0,void this.addEach(t)):new Dict(t,e)}var Shim=require("./shim"),GenericCollection=require("./generic-collection"),GenericMap=require("./generic-map");module.exports=Dict,Dict.Dict=Dict,Object.addEach(Dict.prototype,GenericCollection.prototype),Object.addEach(Dict.prototype,GenericMap.prototype),Dict.from=GenericCollection.from,Dict.prototype.constructClone=function(t){return new this.constructor(t,this.getDefault)},Dict.prototype.assertString=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t)},Object.defineProperty(Dict.prototype,"$__proto__",{writable:!0}),Object.defineProperty(Dict.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&"undefined"!=typeof this._protoValue}}),Object.defineProperty(Dict.prototype,"_protoValue",{get:function(){return this.$__proto__},set:function(t){this.$__proto__=t}}),Object.defineProperty(Dict.prototype,"size",GenericCollection._sizePropertyDescriptor),Dict.prototype.get=function(t,e){return this.assertString(t),"__proto__"===t?this._hasProto?this._protoValue:arguments.length>1?e:this.getDefault(t):t in this.store?this.store[t]:arguments.length>1?e:this.getDefault(t)},Dict.prototype.set=function(t,e){this.assertString(t);var i="__proto__"===t;return(i?this._hasProto:t in this.store)?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,i?this._protoValue:this.store[t]),i?this._protoValue=e:this.store[t]=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e),!1):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),this.length++,i?this._protoValue=e:this.store[t]=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e),!0)},Dict.prototype.has=function(t){return this.assertString(t),"__proto__"===t?this._hasProto:t in this.store},Dict.prototype.delete=function(t){return this.assertString(t),"__proto__"===t?!!this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this._protoValue),this._protoValue=void 0,this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0):t in this.store&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.store[t]),delete this.store[t],this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0)},Dict.prototype.clear=function(){var t;this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange("__proto__",this._protoValue),this._protoValue=void 0,this.dispatchesMapChanges&&this.dispatchMapChange("__proto__",void 0));for(t in this.store)this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.store[t]),delete this.store[t],this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0);this.length=0},Dict.prototype.reduce=function(t,e,i){this._hasProto&&(e=t.call(i,e,"$__proto__","__proto__",this));var o=this.store;for(var s in this.store)e=t.call(i,e,o[s],s,this);return e},Dict.prototype.reduceRight=function(t,e,i){var o=this,s=this.store;return e=Object.keys(this.store).reduceRight(function(e,r){return t.call(i,e,s[r],r,o)},e),this._hasProto?t.call(i,e,this._protoValue,"__proto__",o):e},Dict.prototype.one=function(){var t;for(t in this.store)return this.store[t];return this._protoValue},Dict.prototype.toJSON=function(){return this.toObject()};
},{"./generic-collection":6,"./generic-map":7,"./shim":18}],2:[function(require,module,exports){
"use strict";function FastSet(t,e,o,n){if(!(this instanceof FastSet))return new FastSet(t,e,o,n);e=e||Object.equals,o=o||Object.hash,n=n||Function.noop,this.contentEquals=e,this.contentHash=o,this.getDefault=n;var r=this;this.buckets=new this.Buckets(null,function(){return new r.Bucket}),this.length=0,this.addEach(t)}var Shim=require("./shim"),Dict=require("./_dict"),List=require("./_list"),GenericCollection=require("./generic-collection"),GenericSet=require("./generic-set"),TreeLog=require("./tree-log"),object_has=Object.prototype.hasOwnProperty;module.exports=FastSet,FastSet.FastSet=FastSet,Object.addEach(FastSet.prototype,GenericCollection.prototype),Object.addEach(FastSet.prototype,GenericSet.prototype),FastSet.from=GenericCollection.from,FastSet.prototype.Buckets=Dict,FastSet.prototype.Bucket=List,FastSet.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},FastSet.prototype.has=function(t){var e=this.contentHash(t);return this.buckets.get(e).has(t)},FastSet.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var o=this.contentHash(t),n=this.buckets;return n.has(o)?n.get(o).get(t):this.getDefault(t)},FastSet.prototype.delete=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var o=this.contentHash(t),n=this.buckets;if(n.has(o)){var r=n.get(o);if(r.delete(t))return this.length--,0===r.length&&n.delete(o),!0}return!1},FastSet.prototype.clear=function(){this.buckets.clear(),this.length=0},FastSet.prototype.add=function(t){var e=this.contentHash(t),o=this.buckets;return o.has(e)||o.set(e,new this.Bucket(null,this.contentEquals)),!o.get(e).has(t)&&(o.get(e).add(t),this.length++,!0)},FastSet.prototype.reduce=function(t,e){var o=arguments[2],n=this.buckets,r=0;return n.reduce(function(e,n){return n.reduce(function(e,n){return t.call(o,e,n,r++,this)},e,this)},e,this)},FastSet.prototype.one=function(){if(this.length>0)return this.buckets.one().one()},FastSet.prototype.iterate=function(){return this.buckets.valuesArray().flatten().iterate()},FastSet.prototype.log=function(t,e,o,n){t=t||TreeLog.unicodeSharp,e=e||this.logNode,o||(o=console.log,n=console),o=o.bind(n);for(var r,s,i,a,c=this.buckets,u=c.size,h=c.keys(),l=0;r=h.next().value;)l===u-1?(s=t.fromAbove,i=" "):0===l?(s=t.branchDown,i=t.strafe):(s=t.fromBoth,i=t.strafe),a=c.get(r),o.call(n,s+t.through+t.branchDown+" "+r),a.forEach(function(r,s){var c,u,h;s===a.head.prev?(c=t.fromAbove,u=" "):(c=t.fromBoth,u=t.strafe),e(s,function(e){h?o.call(n,i+" "+u+"  "+e):(o.call(n,i+" "+c+t.through+t.through+e),h=!0)},function(e){o.call(n,i+" "+t.strafe+"  "+e)})}),l++},FastSet.prototype.logNode=function(t,e){var o=t.value;Object(o)===o?JSON.stringify(o,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+o)};
},{"./_dict":1,"./_list":3,"./generic-collection":6,"./generic-set":9,"./shim":18,"./tree-log":20}],3:[function(require,module,exports){
"use strict";function List(t,e,i){return List._init(List,this,t,e,i)}function ListIterator(t){this.head=t,this.at=t.next}function Node(t){this.value=t,this.prev=null,this.next=null}module.exports=List;var Shim=require("./shim"),GenericCollection=require("./generic-collection"),GenericOrder=require("./generic-order");List._init=function(t,e,i,r,n){if(!(e instanceof t))return new t(i,r,n);var o=e.head=new e.Node;o.next=o,o.prev=o,e.contentEquals=r||Object.equals,e.getDefault=n||Function.noop,e.length=0,e.addEach(i)},List.List=List,Object.addEach(List.prototype,GenericCollection.prototype),Object.addEach(List.prototype,GenericOrder.prototype),List.from=GenericCollection.from,List.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.getDefault)},List.prototype.find=function(t,e,i){e=e||this.contentEquals;for(var r=this.head,n=this.scan(i,r.next);n!==r;){if(e(n.value,t))return n;n=n.next}},List.prototype.findLast=function(t,e,i){e=e||this.contentEquals;for(var r=this.head,n=this.scan(i,r.prev);n!==r;){if(e(n.value,t))return n;n=n.prev}},List.prototype.has=function(t,e){return!!this.find(t,e)},List.prototype.get=function(t,e){var i=this.find(t,e);return i?i.value:this.getDefault(t)},List.prototype.delete=function(t,e){var i=this.findLast(t,e);return!!i&&(i.delete(),this.length--,!0)},List.prototype.deleteAll=function(t,e){e=e||this.contentEquals;for(var i=this.head,r=i.next,n=0;r!==i;)e(t,r.value)&&(r.delete(),n++),r=r.next;return this.length-=n,n},List.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},List.prototype.add=function(t){var e=new this.Node(t);return this._addNode(e)},List.prototype._addNode=function(t){return this.head.addBefore(t),this.length++,!0},List.prototype.push=function(){for(var t=this.head,e=0;e<arguments.length;e++){var i=arguments[e],r=new this.Node(i);t.addBefore(r)}this.length+=arguments.length},List.prototype.unshift=function(){for(var t=this.head,e=0;e<arguments.length;e++){var i=arguments[e],r=new this.Node(i);t.addAfter(r),t=r}this.length+=arguments.length},List.prototype._shouldPop=function(){var t,e=this.head;return e.prev!==e&&(t=e.prev.value),t},List.prototype.pop=function(t,e){var i,r=this.head;if(r.prev!==r){i=r.prev.value;var n=this.length-1,o=t?t.call(this,i,n):void 0;r.prev.delete(),this.length--,e?e.call(this,i,n,o):void 0}return i},List.prototype.shift=function(t,e){var i,r=this.head;if(r.prev!==r){i=r.next.value;var n=t?t.call(this,i,0):void 0;r.next.delete(),this.length--,e?e.call(this,i,0,n):void 0}return i},List.prototype.peek=function(){if(this.head!==this.head.next)return this.head.next.value},List.prototype.poke=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},List.prototype.one=function(){return this.peek()},List.prototype.scan=function(t,e){var i=this.head;if("number"==typeof t){var r=t;if(r>=0)for(t=i.next;r&&(r--,t=t.next,t!=i););else for(t=i;r<0&&(r++,t=t.prev,t!=i););return t}return t||e},List.prototype.slice=function(t,e){var i=[],r=this.head;for(t=this.scan(t,r.next),e=this.scan(e,r);t!==e&&t!==r;)i.push(t.value),t=t.next;return i},List.prototype.splice=function(t,e){return this.swap(t,e,Array.prototype.slice.call(arguments,2))},List.prototype.swap=function(t,e,i,r,n){var o=t;t=this.scan(t,this.head),null==e&&(e=1/0),i=Array.from(i);for(var s=[],h=t;e--&&e>=0&&h!==this.head;)s.push(h.value),h=h.next;var a;a=r?r.call(this,t,i,s):void 0;for(var h=t,p=0,h=t;p<s.length;p++,h=h.next)h.delete();null==o&&h===this.head&&(h=this.head.next);for(var p=0;p<i.length;p++){var u=new this.Node(i[p]);h.addBefore(u)}return this.length+=i.length-s.length,n?n.call(this,t,i,s):void 0,s},List.prototype.reverse=function(){var t=this.head;do{var e=t.next;t.next=t.prev,t.prev=e,t=t.next}while(t!==this.head);return this},List.prototype.sort=function(){this.swap(0,this.length,this.sorted())},List.prototype.reduce=function(t,e){for(var i=arguments[2],r=this.head,n=r.next;n!==r;)e=t.call(i,e,n.value,n,this),n=n.next;return e},List.prototype.reduceRight=function(t,e){for(var i=arguments[2],r=this.head,n=r.prev;n!==r;)e=t.call(i,e,n.value,n,this),n=n.prev;return e},List.prototype.updateIndexes=function(t,e){for(;t!==this.head;)t.index=e++,t=t.next},List.prototype.iterate=function(){return new ListIterator(this.head)},ListIterator.prototype.__iterationObject=null,Object.defineProperty(ListIterator.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),ListIterator.prototype.next=function(){if(this.at===this.head)this._iterationObject.done=!0,this._iterationObject.value=void 0;else{var t=this.at.value;this.at=this.at.next,this._iterationObject.value=t}return this._iterationObject},List.prototype.Node=Node,Node.prototype.delete=function(){this.prev.next=this.next,this.next.prev=this.prev},Node.prototype.addBefore=function(t){var e=this.prev;this.prev=t,t.prev=e,e.next=t,t.next=this},Node.prototype.addAfter=function(t){var e=this.next;this.next=t,t.next=e,e.prev=t,t.prev=this};
},{"./generic-collection":6,"./generic-order":8,"./shim":18}],4:[function(require,module,exports){
(function (global){
"use strict";var Shim=require("./shim"),GenericCollection=require("./generic-collection"),Map,GlobalMap,CollectionsMap;if(void 0!==global.Map&&"function"==typeof global.Set.prototype.values){Map=module.exports=global.Map,GlobalMap=Map,Map.Map=Map;var protoIsSupported={}.__proto__===Object.prototype,map_makeObservable;map_makeObservable=protoIsSupported?function(){this.__proto__=ChangeDispatchMap}:function(){Object.defineProperties(this,observableSetProperties)},Object.defineProperty(Map.prototype,"makeObservable",{value:map_makeObservable,writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(Map.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),Map.prototype.constructClone=function(e){return new this.constructor(e)},Map.prototype.isMap=!0,Map.prototype.addEach=function(e){if(e&&Object(e)===e)if("function"==typeof e.forEach)e.isMap===!0?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);return this},Map.prototype.add=function(e,t){return this.set(t,e)},Map.prototype.reduce=function(e,t){var a=arguments[2];return this.forEach(function(r,o,i){t=e.call(a,t,r,o,this)}),t},Map.prototype.reduceRight=function(e,t){for(var a,r=arguments[2],o=this.keys(),i=this.size,n=new Array(this.size),p=0;a=o.next().value;)n[--i]=a;for(;p++<i;)t=e.call(r,t,this.get(n[p]),n[p],this);return t},Map.prototype.equals=function(e,t){if(t=t||Object.equals,this===e)return!0;if(e&&"function"==typeof e.every)return e.size===this.size&&e.every(function(e,a){return t(this.get(a),e)},this);var a=Object.keys(e);return a.length===this.size&&Object.keys(e).every(function(a){return t(this.get(a),e[a])},this)};var _keysArrayFunction=function(e,t){return t};Map.prototype.keysArray=function(){return this.map(_keysArrayFunction)};var _valuesArrayFunction=function(e,t){return e};Map.prototype.valuesArray=function(){return this.map(_valuesArrayFunction)};var _entriesArrayFunction=function(e,t){return[t,e]};Map.prototype.entriesArray=function(){return this.map(_entriesArrayFunction)},Map.prototype.toJSON=function(){return this.entriesArray()},Map.prototype.items=function(){return this.entriesArray()},Map.from=function(e){var t=new this;return t.addEach(e),t},Object.defineProperty(Map.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0});var map_clear=Map.prototype.clear,map_set=Map.prototype.set,map_delete=Map.prototype.delete,observableMapProperties={clear:{value:function(){var e;this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keysArray()),map_clear.call(this),this.dispatchesMapChanges&&e.forEach(function(e){this.dispatchMapChange(e)},this)},writable:!0,configurable:!0},set:{value:function(e,t){var a=this.get(e);return a?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,a),map_set.call(this,e,t),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),map_set.call(this,e,t),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),this},writable:!0,configurable:!0},delete:{value:function(e){return!!this.has(e)&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,this.get(e)),map_delete.call(this,e),this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0)}}};Object.addEach(Map.prototype,GenericCollection.prototype,!1);var ChangeDispatchMap=Object.create(Map.prototype,observableMapProperties)}var Set=require("./_set").CollectionsSet,GenericMap=require("./generic-map");CollectionsMap=Map=function e(t,a,r,o){return this instanceof e?(a=a||Object.equals,r=r||Object.hash,o=o||Function.noop,this.contentEquals=a,this.contentHash=r,this.getDefault=o,this.store=new Set(void 0,function(e,t){return a(e.key,t.key)},function(e){return r(e.key)}),this.length=0,void this.addEach(t)):new e(t,a,r,o)},Map.Map=Map,Object.addEach(Map.prototype,GenericCollection.prototype),Object.addEach(Map.prototype,GenericMap.prototype),Object.defineProperty(Map.prototype,"size",GenericCollection._sizePropertyDescriptor),Map.from=GenericCollection.from,Map.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},Map.prototype.log=function(e,t,a,r){t=t||this.logNode,this.store.log(e,function(e,a,r){t(e.value.value,a,r)},a,r)},Map.prototype.logNode=function(e,t){t(" key: "+e.key),t(" value: "+e.value)},GlobalMap?(module.exports=GlobalMap,GlobalMap.CollectionsMap=CollectionsMap):module.exports=CollectionsMap;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./_set":5,"./generic-collection":6,"./generic-map":7,"./shim":18}],5:[function(require,module,exports){
(function (global){
"use strict";var Shim=require("./shim"),GenericCollection=require("./generic-collection"),GenericSet=require("./generic-set"),Set,GlobalSet,CollectionsSet;void 0!==global.Set&&"function"==typeof global.Set.prototype.values&&(GlobalSet=module.exports=global.Set,GlobalSet.Set=GlobalSet,GlobalSet.prototype.reduce=function(t,e){var o=arguments[2];return this.forEach(function(r){e=t.call(o,e,r,this)}),e},GlobalSet.prototype.reduceRight=function(t,e){for(var o,r=arguments[2],n=this.values(),i=this.size,l=new Array(this.size),s=0;o=n.next().value;)l[--i]=o;for(;s++<i;)e=t.call(r,e,o,this);return e},GlobalSet.prototype.equals=function(t,e){var o=this;return t&&"function"==typeof t.reduce&&this.size===(t.size||t.length)&&t.reduce(function(t,r){return t&&o.has(r,e)},!0)},GlobalSet.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},GlobalSet.prototype.toJSON=function(){return this.entriesArray()},GlobalSet.prototype.one=function(){if(this.size>0)return this.values().next().value},GlobalSet.prototype.pop=function(){if(this.size){for(var t,e,o=this.values();t=o.next().value;)e=t;return this.delete(e,this.size-1),e}},GlobalSet.prototype.shift=function(){if(this.size){var t=this.values().next().value;return this.delete(t,0),t}},Object.defineProperty(GlobalSet.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),GlobalSet.from=function(t){var e=new this;return e.addEach(t),e},Object.addEach(GlobalSet.prototype,GenericCollection.prototype,!1),Object.addEach(GlobalSet.prototype,GenericSet.prototype,!1));var List=require("./_list"),FastSet=require("./_fast-set"),Iterator=require("./iterator");CollectionsSet=function t(e,o,r,n){return t._init(t,this,e,o,r,n)},CollectionsSet._init=function(t,e,o,r,n,i){return e instanceof t?(r=r||Object.equals,n=n||Object.hash,i=i||Function.noop,e.contentEquals=r,e.contentHash=n,e.getDefault=i,e.order=new e.Order(void 0,r),e.store=new e.Store(void 0,function(t,e){return r(t.value,e.value)},function(t){return n(t.value)}),e.length=0,void e.addEach(o)):new t(o,r,n,i)},CollectionsSet.Set=CollectionsSet,CollectionsSet.CollectionsSet=CollectionsSet,Object.addEach(CollectionsSet.prototype,GenericCollection.prototype),Object.addEach(CollectionsSet.prototype,GenericSet.prototype),CollectionsSet.from=GenericCollection.from,Object.defineProperty(CollectionsSet.prototype,"size",GenericCollection._sizePropertyDescriptor),CollectionsSet.prototype.Order=List,CollectionsSet.prototype.Store=FastSet,CollectionsSet.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},CollectionsSet.prototype.has=function(t){var e=new this.order.Node(t);return this.store.has(e)},CollectionsSet.prototype.get=function(t,e){if(e)throw new Error("Set#get does not support second argument: equals");var o=new this.order.Node(t);return o=this.store.get(o),o?o.value:this.getDefault(t)},CollectionsSet.prototype.add=function(t){var e=new this.order.Node(t);if(!this.store.has(e)){this.length;return this.order.add(t),e=this.order.head.prev,this.store.add(e),this.length++,!0}return!1},CollectionsSet.prototype.delete=function(t,e){if(e)throw new Error("Set#delete does not support second argument: equals");var o=new this.order.Node(t);return!!this.store.has(o)&&(o=this.store.get(o),this.store.delete(o),this.order.splice(o,1),this.length--,!0)},CollectionsSet.prototype.pop=function(){if(this.length){var t=this.order.head.prev.value;return this.delete(t),t}},CollectionsSet.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this.delete(t),t}},CollectionsSet.prototype.one=function(){if(this.length>0)return this.store.one().value},CollectionsSet.prototype.clear=function(){this.store.clear(),this.order.clear(),this.length=0},Object.defineProperty(CollectionsSet.prototype,"_clear",{value:CollectionsSet.prototype.clear}),CollectionsSet.prototype.reduce=function(t,e){var o=arguments[2],r=this.order,n=0;return r.reduce(function(e,r){return t.call(o,e,r,n++,this)},e,this)},CollectionsSet.prototype.reduceRight=function(t,e){var o=arguments[2],r=this.order,n=this.length-1;return r.reduceRight(function(e,r){return t.call(o,e,r,n--,this)},e,this)},CollectionsSet.prototype.iterate=function(){return this.order.iterate()},CollectionsSet.prototype.values=function(){return new Iterator(this)},CollectionsSet.prototype.log=function(){var t=this.store;return t.log.apply(t,arguments)},GlobalSet?(GlobalSet.prototype.valuesArray=GenericSet.prototype.valuesArray,GlobalSet.prototype.entriesArray=GenericSet.prototype.entriesArray,module.exports=GlobalSet,GlobalSet.CollectionsSet=CollectionsSet):module.exports=CollectionsSet;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./_fast-set":2,"./_list":3,"./generic-collection":6,"./generic-set":9,"./iterator":10,"./shim":18}],6:[function(require,module,exports){
(function (global){
"use strict";function GenericCollection(){throw new Error("Can't construct. GenericCollection is a mixin.")}module.exports=GenericCollection;var DOMTokenList=global.DOMTokenList||function(){};GenericCollection.EmptyArray=Object.freeze([]),GenericCollection.prototype.addEach=function(e){if(e&&(e instanceof Array||e instanceof DOMTokenList||e instanceof String))for(var t=0;t<e.length;t++)this.add(e[t],t);else if(e&&Object(e)===e)if("function"==typeof e.forEach)e.forEach(this.add,this);else if("number"==typeof e.length)for(var t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.add(e[t],t)},this);return this},GenericCollection.prototype.deleteEach=function(e,t){return e.forEach(function(e){this.delete(e,t)},this),this},GenericCollection.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(n,o,r,i,c){e.call(t,o,r,i,c)},void 0)},GenericCollection.prototype.map=function(e){var t=arguments[1],n=[];return this.reduce(function(o,r,i,c,u){n.push(e.call(t,r,i,c,u))},void 0),n},GenericCollection.prototype.enumerate=function(e){null==e&&(e=0);var t=[];return this.reduce(function(n,o){t.push([e++,o])},void 0),t},GenericCollection.prototype.group=function(e,t,n){n=n||Object.equals;var o=[],r=[];return this.forEach(function(i,c,u){var l,c=e.call(t,i,c,u),s=r.indexOf(c,n);s===-1?(l=[],o.push([c,l]),r.push(c)):l=o[s][1],l.push(i)}),o},GenericCollection.prototype.toArray=function(){return this.map(Function.identity)},GenericCollection.prototype.toObject=function(){var e={};return this.reduce(function(t,n,o){e[o]=n},void 0),e},GenericCollection.from=function(){return this.apply(this,arguments)},GenericCollection.prototype.filter=function(e){var t=arguments[1],n=this.constructClone();return this.reduce(function(o,r,i,c,u){e.call(t,r,i,c,u)&&n.add(r,i)},void 0),n},GenericCollection.prototype.every=function(e){var t=arguments[1];return this.reduce(function(n,o,r,i,c){return n&&e.call(t,o,r,i,c)},!0)},GenericCollection.prototype.some=function(e){var t=arguments[1];return this.reduce(function(n,o,r,i,c){return n||e.call(t,o,r,i,c)},!1)},GenericCollection.prototype.all=function(){return this.every(Boolean)},GenericCollection.prototype.any=function(){return this.some(Boolean)},GenericCollection.prototype.min=function(e){e=e||this.contentCompare||Object.compare;var t=!0;return this.reduce(function(n,o){return t?(t=!1,o):e(o,n)<0?o:n},void 0)},GenericCollection.prototype.max=function(e){e=e||this.contentCompare||Object.compare;var t=!0;return this.reduce(function(n,o){return t?(t=!1,o):e(o,n)>0?o:n},void 0)},GenericCollection.prototype.sum=function(e){return e=void 0===e?0:e,this.reduce(function(e,t){return e+t},e)},GenericCollection.prototype.average=function(e){var t=void 0===e?0:e,n=void 0===e?0:e;return this.reduce(function(e,o){t+=o,n+=1},void 0),t/n},GenericCollection.prototype.concat=function(){for(var e=this.constructClone(this),t=0;t<arguments.length;t++)e.addEach(arguments[t]);return e},GenericCollection.prototype.flatten=function(){var e=this;return this.reduce(function(t,n){return n.forEach(function(e){this.push(e)},t,e),t},[])},GenericCollection.prototype.zip=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),Array.unzip(e)},GenericCollection.prototype.join=function(e){return this.reduce(function(t,n){return void 0===t?n:t+e+n},void 0)},GenericCollection.prototype.sorted=function(e,t,n){return e=e||this.contentCompare||Object.compare,e.by?(t=e.by,e=e.compare||this.contentCompare||Object.compare):t=t||Function.identity,void 0===n&&(n=1),this.map(function(e){return{by:t(e),value:e}}).sort(function(t,o){return e(t.by,o.by)*n}).map(function(e){return e.value})},GenericCollection.prototype.reversed=function(){return this.constructClone(this).reverse()},GenericCollection.prototype.clone=function(e,t){if(void 0===e)e=1/0;else if(0===e)return this;var n=this.constructClone();return this.forEach(function(o,r){n.add(Object.clone(o,e-1,t),r)},this),n},GenericCollection.prototype.only=function(){if(1===this.length)return this.one()},GenericCollection.prototype.iterator=function(){return this.iterate.apply(this,arguments)},GenericCollection._sizePropertyDescriptor={get:function(){return this.length},enumerable:!1,configurable:!0},Object.defineProperty(GenericCollection.prototype,"size",GenericCollection._sizePropertyDescriptor),require("./shim-array");
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./shim-array":14}],7:[function(require,module,exports){
"use strict";function GenericMap(){throw new Error("Can't construct. GenericMap is a mixin.")}function Item(e,t){this.key=e,this.value=t}var Object=require("./shim-object"),Iterator=require("./iterator");module.exports=GenericMap,GenericMap.prototype.isMap=!0,GenericMap.prototype.addEach=function(e){var t;if(e&&Object(e)===e)if("function"==typeof e.forEach)e.isMap===!0?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);else Object.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(t=0;t<e.length;t++)this.add(e[t],t);return this},GenericMap.prototype.get=function(e,t){var r=this.store.get(new this.Item(e));return r?r.value:arguments.length>1?(console.log("Use of a second argument as default value is deprecated to match standards"),t):this.getDefault(e)},GenericMap.prototype.set=function(e,t){var r=new this.Item(e,t),i=this.store.get(r),n=!1;return i?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,i.value),i.value=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(r)&&(this.length++,n=!0),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),n},GenericMap.prototype.add=function(e,t){return this.set(t,e)},GenericMap.prototype.has=function(e){return this.store.has(new this.Item(e))},GenericMap.prototype.delete=function(e){var t=new this.Item(e);if(this.store.has(t)){var r=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,r),this.store.delete(t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},GenericMap.prototype.clear=function(){var e,t;if(this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keysArray()),this.store.clear(),this.length=0,this.dispatchesMapChanges)for(var r=0;t=e[r];r++)this.dispatchMapChange(t)},GenericMap.prototype.reduce=function(e,t,r){return this.store.reduce(function(t,i){return e.call(r,t,i.value,i.key,this)},t,this)},GenericMap.prototype.reduceRight=function(e,t,r){return this.store.reduceRight(function(t,i){return e.call(r,t,i.value,i.key,this)},t,this)},GenericMap.prototype.keysArray=function(){return this.map(function(e,t){return t})},GenericMap.prototype.keys=function(){return new Iterator(this.keysArray())},GenericMap.prototype.valuesArray=function(){return this.map(Function.identity)},GenericMap.prototype.values=function(){return new Iterator(this.valuesArray())},GenericMap.prototype.entriesArray=function(){return this.map(function(e,t){return[t,e]})},GenericMap.prototype.entries=function(){return new Iterator(this.entriesArray())},GenericMap.prototype.items=function(){return this.entriesArray()},GenericMap.prototype.equals=function(e,t){if(t=t||Object.equals,this===e)return!0;if(e&&"function"==typeof e.every)return e.length===this.length&&e.every(function(e,r){return t(this.get(r),e)},this);var r=Object.keys(e);return r.length===this.length&&Object.keys(e).every(function(r){return t(this.get(r),e[r])},this)},GenericMap.prototype.toJSON=function(){return this.entriesArray()},GenericMap.prototype.Item=Item,Item.prototype.equals=function(e){return Object.equals(this.key,e.key)&&Object.equals(this.value,e.value)},Item.prototype.compare=function(e){return Object.compare(this.key,e.key)};
},{"./iterator":10,"./shim-object":16}],8:[function(require,module,exports){
function GenericOrder(){throw new Error("Can't construct. GenericOrder is a mixin.")}var Object=require("./shim-object");module.exports=GenericOrder,GenericOrder.prototype.equals=function(e,r){if(r=r||this.contentEquals||Object.equals,this===e)return!0;if(!e)return!1;return this.length===e.length&&this.zip(e).every(function(e){return r(e[0],e[1])})},GenericOrder.prototype.compare=function(e,r){if(r=r||this.contentCompare||Object.compare,this===e)return 0;if(!e)return 1;var t=Math.min(this.length,e.length),n=this.zip(e).reduce(function(e,n,i){return 0===e?i>=t?e:r(n[0],n[1]):e},0);return 0===n?this.length-e.length:n},GenericOrder.prototype.toJSON=function(){return this.toArray()};
},{"./shim-object":16}],9:[function(require,module,exports){
function GenericSet(){throw new Error("Can't construct. GenericSet is a mixin.")}module.exports=GenericSet,GenericSet.prototype.isSet=!0,GenericSet.prototype.union=function(e){var t=this.constructClone(this);return t.addEach(e),t},GenericSet.prototype.intersection=function(e){return this.constructClone(this.filter(function(t){return e.has(t)}))},GenericSet.prototype.difference=function(e){var t=this.constructClone(this);return t.deleteEach(e),t},GenericSet.prototype.symmetricDifference=function(e){var t=this.union(e),n=this.intersection(e);return t.difference(n)},GenericSet.prototype.deleteAll=function(e){return+this.delete(e)},GenericSet.prototype.equals=function(e,t){var n=this;return e&&"function"==typeof e.reduce&&this.length===e.length&&e.reduce(function(e,r){return e&&n.has(r,t)},!0)},GenericSet.prototype.forEach=function(e){var t=arguments[1];return this.reduce(function(n,r,i,o,c){e.call(t,r,r,o,c)},void 0)},GenericSet.prototype.toJSON=function(){return this.toArray()},GenericSet.prototype.contains=function(e){return this.has(e)},GenericSet.prototype.remove=function(e){return this.delete(e)},GenericSet.prototype.toggle=function(e){this.has(e)?this.delete(e):this.add(e)};var _valuesArrayFunction=function(e,t){return e};GenericSet.prototype.valuesArray=function(){return this.map(_valuesArrayFunction)};var _entriesArrayFunction=function(e,t){return[t,e]};GenericSet.prototype.entriesArray=function(){return this.map(_entriesArrayFunction)};
},{}],10:[function(require,module,exports){
"use strict";function Iterator(t){var e=t&&t.values&&t.values();if(e&&"function"==typeof e.next)return e;if(!(this instanceof Iterator))return new Iterator(t);if(Array.isArray(t)||"string"==typeof t)return Iterator.iterate(t);if(t=Object(t),t instanceof Iterator)return t;if(t.next)this.next=function(){return t.next()};else if(t.iterate){var r=t.iterate();this.next=function(){return r.next()}}else{if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}module.exports=Iterator;var Object=require("./shim-object"),GenericCollection=require("./generic-collection");Iterator.prototype.forEach=GenericCollection.prototype.forEach,Iterator.prototype.map=GenericCollection.prototype.map,Iterator.prototype.filter=GenericCollection.prototype.filter,Iterator.prototype.every=GenericCollection.prototype.every,Iterator.prototype.some=GenericCollection.prototype.some,Iterator.prototype.any=GenericCollection.prototype.any,Iterator.prototype.all=GenericCollection.prototype.all,Iterator.prototype.min=GenericCollection.prototype.min,Iterator.prototype.max=GenericCollection.prototype.max,Iterator.prototype.sum=GenericCollection.prototype.sum,Iterator.prototype.average=GenericCollection.prototype.average,Iterator.prototype.flatten=GenericCollection.prototype.flatten,Iterator.prototype.zip=GenericCollection.prototype.zip,Iterator.prototype.enumerate=GenericCollection.prototype.enumerate,Iterator.prototype.sorted=GenericCollection.prototype.sorted,Iterator.prototype.group=GenericCollection.prototype.group,Iterator.prototype.reversed=GenericCollection.prototype.reversed,Iterator.prototype.toArray=GenericCollection.prototype.toArray,Iterator.prototype.toObject=GenericCollection.prototype.toObject,Iterator.prototype.iterator=GenericCollection.prototype.iterator,Iterator.prototype.__iterationObject=null,Object.defineProperty(Iterator.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:void 0})}}),Iterator.prototype.constructClone=function(t){var e=[];return e.addEach(t),e},Iterator.prototype.mapIterator=function(t){var e=Iterator(this),r=arguments[1],o=0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){if(e._iterationObject.done!==!0){var n=t.call(r,e.next().value,o++,e);e._iterationObject.value=n}return e._iterationObject})},Iterator.prototype.filterIterator=function(t){var e=Iterator(this),r=arguments[1],o=0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){for(var n;;){if(n=e.next(),n.done===!0)return n;if(t.call(r,n.value,o++,e))return n}})},Iterator.prototype.reduce=function(t){var e,r=Iterator(this),o=arguments[1],n=arguments[2],i=0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError;if(e=r.next(),e.done===!0){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}for(o=arguments.length>1?t.call(n,o,e.value,i,r):e.value,i++;;){if(e=r.next(),e.done===!0)return o;o=t.call(n,o,e.value,i,r),i++}},Iterator.prototype.concat=function(){return Iterator.concat(Array.prototype.concat.apply(this,arguments))},Iterator.prototype.dropWhile=function(t){var e,r,o=Iterator(this),n=arguments[1],i=!1,a=0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError;for(;;){if(r=o.next(),r.done===!0)break;if(!t.call(n,r.value,a,o)){i=!0,e=r.value;break}a++}return i?o.constructor([e]).concat(o):o.constructor([])},Iterator.prototype.takeWhile=function(t){var e=Iterator(this),r=arguments[1],o=0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){if(e._iterationObject.done!==!0){var n=e.next().value;t.call(r,n,o++,e)?e._iterationObject.value=n:(e._iterationObject.done=!0,e._iterationObject.value=void 0)}return e._iterationObject})},Iterator.prototype.zipIterator=function(){return Iterator.unzip(Array.prototype.concat.apply(this,arguments))},Iterator.prototype.enumerateIterator=function(t){return Iterator.count(t).zipIterator(this)},Iterator.iterate=function(t){var e;return e=0,new Iterator(function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length){this._iterationObject.done=!0,this._iterationObject.value=void 0;break}e+=1}else e>=t.length&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);return this._iterationObject.done||(this._iterationObject.value=t[e],e+=1),this._iterationObject})},Iterator.cycle=function(t,e){var r;return arguments.length<2&&(e=1/0),new Iterator(function(){var o,n;return r&&(n=r()),r&&n.done!==!0||(e>0?(e--,o=Iterator.iterate(t),n=(r=o.next.bind(o))()):(this._iterationObject.done=!0,n=this._iterationObject)),n})},Iterator.concat=function(t){t=Iterator(t);var e;return new Iterator(function(){var r,o;return e&&(o=e()),o&&o.done!==!0?o:(o=t.next(),o.done===!1?(r=Iterator(o.value),(e=r.next.bind(r))()):o)})},Iterator.unzip=function(t){return t=Iterator(t).map(Iterator),new Iterator(0===t.length?[]:function(){var e,r,o=t.map(function(t){return r=t.next(),r.done===!0&&(e=!0),r.value});return e?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=o,this._iterationObject})},Iterator.zip=function(){return Iterator.unzip(Array.prototype.slice.call(arguments))},Iterator.chain=function(){return Iterator.concat(Array.prototype.slice.call(arguments))},Iterator.range=function(t,e,r){return arguments.length<3&&(r=1),arguments.length<2&&(e=t,t=0),t=t||0,r=r||1,new Iterator(function(){t>=e&&(this._iterationObject.done=!0,this._iterationObject.value=void 0);var o=t;return t+=r,this._iterationObject.value=o,this._iterationObject})},Iterator.count=function(t,e){return Iterator.range(t,1/0,e)},Iterator.repeat=function(t,e){return new Iterator.range(e).mapIterator(function(){return t})};
},{"./generic-collection":6,"./shim-object":16}],11:[function(require,module,exports){
function ChangeListenersRecord(e){var t=ChangeListenerSpecificHandlerMethodName.get(e);return t||(t="handle",t+=e,t+="Change",ChangeListenerSpecificHandlerMethodName.set(e,t)),this._current=null,this._current=null,this.specificHandlerMethodName=t,this}function WillChangeListenersRecord(e){var t=WillChangeListenerSpecificHandlerMethodName.get(e);return t||(t="handle",t+=e,t+="WillChange",WillChangeListenerSpecificHandlerMethodName.set(e,t)),this.specificHandlerMethodName=t,this}var Map=require("../_map"),ObjectChangeDescriptor=module.exports.ObjectChangeDescriptor=function(e){return this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null,this};Object.defineProperties(ObjectChangeDescriptor.prototype,{name:{value:null,writable:!0},isActive:{value:!1,writable:!0},_willChangeListeners:{value:null,writable:!0},willChangeListeners:{get:function(){return this._willChangeListeners||(this._willChangeListeners=new this.willChangeListenersRecordConstructor(this.name))}},_changeListeners:{value:null,writable:!0},changeListeners:{get:function(){return this._changeListeners||(this._changeListeners=new this.changeListenersRecordConstructor(this.name))}},changeListenersRecordConstructor:{value:ChangeListenersRecord,writable:!0},willChangeListenersRecordConstructor:{value:ChangeListenersRecord,writable:!0}});var ListenerGhost=module.exports.ListenerGhost=Object.create(null),ChangeListenerSpecificHandlerMethodName=new Map;module.exports.ChangeListenersRecord=ChangeListenersRecord,Object.defineProperties(ChangeListenersRecord.prototype,{_current:{value:null,writable:!0},current:{get:function(){return this._current},set:function(e){this._current=e}},ListenerGhost:{value:ListenerGhost,writable:!0},ghostCount:{value:0,writable:!0},maxListenerGhostRatio:{value:.3,writable:!0},listenerGhostFilter:{value:function(e){return e!==this.ListenerGhost}},removeCurrentGostListenersIfNeeded:{value:function(){return this._current&&this.ghostCount/this._current.length>this.maxListenerGhostRatio&&(this.ghostCount=0,this._current=this._current.filter(this.listenerGhostFilter,this)),this._current}},dispatchBeforeChange:{value:!1,writable:!0},genericHandlerMethodName:{value:"handlePropertyChange",writable:!0}}),module.exports.WillChangeListenersRecord=WillChangeListenersRecord;var WillChangeListenerSpecificHandlerMethodName=new Map;WillChangeListenersRecord.prototype=new ChangeListenersRecord,WillChangeListenersRecord.prototype.constructor=WillChangeListenersRecord,WillChangeListenersRecord.prototype.genericHandlerMethodName="handlePropertyWillChange";
},{"../_map":4}],12:[function(require,module,exports){
function PropertyChanges(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}function dispatchEach(e,r,t,n){if(e&&e._current){var s,o,i,a,p,h=e.specificHandlerMethodName,c=e.genericHandlerMethodName,y=ListenerGhost;if(Array.isArray(e._current)){for(s=e.removeCurrentGostListenersIfNeeded(),i=0,a=s.length;i<a;i++)if((p=s[i])!==y){if(o=p[h]||p[c]||p,!o.call)throw new Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+o);o.call(p,t,r,n)}}else{if(p=e._current,o=p[h]||p[c]||p,!o.call)throw new Error("No event listener for "+e.specificHandlerName+" or "+e.genericHandlerName+" or call on "+o);o.call(p,t,r,n)}}}var objectHasOwnProperty=Object.prototype.hasOwnProperty;module.exports=PropertyChanges,require("../shim");var Map=require("../_map"),WeakMap=require("../weak-map"),ChangeDescriptor=require("./change-descriptor"),ObjectChangeDescriptor=ChangeDescriptor.ObjectChangeDescriptor,ListenerGhost=ChangeDescriptor.ListenerGhost;PropertyChanges.debug=!0;var ObjectsPropertyChangeListeners=new WeakMap,ObjectChangeDescriptorName=new Map;PropertyChanges.ObjectChangeDescriptor=function(){},PropertyChanges.prototype.getOwnPropertyChangeDescriptor=function(e){var r,t=ObjectsPropertyChangeListeners.get(this);if(t||(t=Object.create(null),ObjectsPropertyChangeListeners.set(this,t)),void 0===(r=t[e])){var n=ObjectChangeDescriptorName.get(e);return n||(n=String(e),n=n&&n[0].toUpperCase()+n.slice(1),ObjectChangeDescriptorName.set(e,n)),t[e]=new ObjectChangeDescriptor(n)}return r},PropertyChanges.prototype.hasOwnPropertyChangeDescriptor=function(e){var r=ObjectsPropertyChangeListeners.get(this);return!!r&&(!e||void 0!==r[e])},PropertyChanges.prototype.addOwnPropertyChangeListener=function(e,r,t){this.makeObservable&&!this.isObservable&&this.makeObservable();var n=PropertyChanges.getOwnPropertyChangeDescriptor(this,e),s=t?n.willChangeListeners:n.changeListeners;PropertyChanges.makePropertyObservable(this,e),s._current?Array.isArray(s._current)?s._current.push(r):s._current=[s._current,r]:s._current=r;var o=this;return function(){PropertyChanges.removeOwnPropertyChangeListener(o,e,r,t),o=null}},PropertyChanges.prototype.addBeforeOwnPropertyChangeListener=function(e,r){return PropertyChanges.addOwnPropertyChangeListener(this,e,r,!0)},PropertyChanges.prototype.removeOwnPropertyChangeListener=function e(r,t,n){var s,o=PropertyChanges.getOwnPropertyChangeDescriptor(this,r);if(s=n?o._willChangeListeners:o._changeListeners,s&&s._current)if(s._current===t)s._current=null;else{var i=s._current.lastIndexOf(t);if(i===-1)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(r));o.isActive?(s.ghostCount=s.ghostCount+1,s._current[i]=e.ListenerGhost):s._current.spliceOne(i)}},PropertyChanges.prototype.removeOwnPropertyChangeListener.ListenerGhost=ListenerGhost,PropertyChanges.prototype.removeBeforeOwnPropertyChangeListener=function(e,r){return PropertyChanges.removeOwnPropertyChangeListener(this,e,r,!0)},PropertyChanges.prototype.dispatchOwnPropertyChange=function e(r,t,n){var s,o=PropertyChanges.getOwnPropertyChangeDescriptor(this,r);if(!o.isActive){o.isActive=!0,s=n?o._willChangeListeners:o._changeListeners;try{e.dispatchEach(s,r,t,this)}finally{o.isActive=!1}}},PropertyChanges.prototype.dispatchOwnPropertyChange.dispatchEach=dispatchEach,dispatchEach.ListenerGhost=ListenerGhost,PropertyChanges.prototype.dispatchBeforeOwnPropertyChange=function(e,r){return PropertyChanges.dispatchOwnPropertyChange(this,e,r,!0)};var ObjectsOverriddenPropertyDescriptors=new WeakMap,Objects__state__=new WeakMap,propertyListener={get:void 0,set:void 0,configurable:!0,enumerable:!1};PropertyChanges.prototype.makePropertyObservable=function(e){var r=ObjectsOverriddenPropertyDescriptors.get(this);if(!r||void 0===r.get(e)){if(!r){if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(e)+" observable on "+this+" because object is not extensible");r=new Map,ObjectsOverriddenPropertyDescriptors.set(this,r)}var t,n=this;do{if(t=Object.getOwnPropertyDescriptor(n,e))break;n=Object.getPrototypeOf(n)}while(n);if(t){if(!t.configurable)return;if(!t.writable&&!t.set)return}else t={value:void 0,enumerable:!0,writable:!0,configurable:!0};r.set(e,t),"value"in t?(propertyListener.get=function(){return t.value},propertyListener.set=function r(t){var n,s,o=r.overriddenDescriptor;if(t!==o.value){if(n=r.descriptor,!(s=n.isActive)){n.isActive=!0;try{r.dispatchEach(n._willChangeListeners,e,o.value,this)}finally{}}if(o.value=t,!s)try{r.dispatchEach(n._changeListeners,e,t,this)}finally{n.isActive=!1}}},propertyListener.set.dispatchEach=dispatchEach,propertyListener.set.overriddenDescriptor=t,propertyListener.set.descriptor=ObjectsPropertyChangeListeners.get(this)[e],propertyListener.enumerable=t.enumerable,propertyListener.configurable=!0):(propertyListener.get=t.get,propertyListener.set=function r(){var t,n,s,o=r.overriddenGetter.call(this);if(1===arguments.length?r.overriddenSetter.call(this,arguments[0]):2===arguments.length?r.overriddenSetter.call(this,arguments[0],arguments[1]):r.overriddenSetter.apply(this,arguments),(s=r.overriddenGetter.call(this))!==o){if(t=r.descriptor,!(n=t.isActive)){t.isActive=!0;try{r.dispatchEach(t._willChangeListeners,e,o,this)}finally{}}if(!n)try{r.dispatchEach(t._changeListeners,e,s,this)}finally{t.isActive=!1}}},propertyListener.enumerable=t.enumerable,propertyListener.configurable=!0,propertyListener.set.dispatchEach=dispatchEach,propertyListener.set.overriddenSetter=t.set,propertyListener.set.overriddenGetter=t.get,propertyListener.set.descriptor=ObjectsPropertyChangeListeners.get(this)[e]),Object.defineProperty(this,e,propertyListener)}},PropertyChanges.getOwnPropertyChangeDescriptor=function(e,r){return e.getOwnPropertyChangeDescriptor?e.getOwnPropertyChangeDescriptor(r):PropertyChanges.prototype.getOwnPropertyChangeDescriptor.call(e,r)},PropertyChanges.hasOwnPropertyChangeDescriptor=function(e,r){return e.hasOwnPropertyChangeDescriptor?e.hasOwnPropertyChangeDescriptor(r):PropertyChanges.prototype.hasOwnPropertyChangeDescriptor.call(e,r)},PropertyChanges.addOwnPropertyChangeListener=function(e,r,t,n){if(Object.isObject(e))return e.addOwnPropertyChangeListener?e.addOwnPropertyChangeListener(r,t,n):this.prototype.addOwnPropertyChangeListener.call(e,r,t,n)},PropertyChanges.removeOwnPropertyChangeListener=function(e,r,t,n){if(Object.isObject(e))return e.removeOwnPropertyChangeListener?e.removeOwnPropertyChangeListener(r,t,n):PropertyChanges.prototype.removeOwnPropertyChangeListener.call(e,r,t,n)},PropertyChanges.dispatchOwnPropertyChange=function(e,r,t,n){if(Object.isObject(e))return e.dispatchOwnPropertyChange?e.dispatchOwnPropertyChange(r,t,n):PropertyChanges.prototype.dispatchOwnPropertyChange.call(e,r,t,n)},PropertyChanges.addBeforeOwnPropertyChangeListener=function(e,r,t){return PropertyChanges.addOwnPropertyChangeListener(e,r,t,!0)},PropertyChanges.removeBeforeOwnPropertyChangeListener=function(e,r,t){return PropertyChanges.removeOwnPropertyChangeListener(e,r,t,!0)},PropertyChanges.dispatchBeforeOwnPropertyChange=function(e,r,t){return PropertyChanges.dispatchOwnPropertyChange(e,r,t,!0)},PropertyChanges.makePropertyObservable=function(e,r){return e.makePropertyObservable?e.makePropertyObservable(r):PropertyChanges.prototype.makePropertyObservable.call(e,r)};
},{"../_map":4,"../shim":18,"../weak-map":21,"./change-descriptor":11}],13:[function(require,module,exports){
"use strict";function RangeChangeDescriptor(e){this.name=e,this.isActive=!1,this._willChangeListeners=null,this._changeListeners=null}function RangeChangeListenersRecord(e){var n=RangeChangeListenersSpecificHandlerMethodName.get(e);return n||(n="handle",n+=e.slice(0,1).toUpperCase(),n+=e.slice(1),n+="RangeChange",RangeChangeListenersSpecificHandlerMethodName.set(e,n)),this.specificHandlerMethodName=n,this}function RangeWillChangeListenersRecord(e){var n=RangeWillChangeListenersSpecificHandlerMethodName.get(e);return n||(n="handle",n+=e.slice(0,1).toUpperCase(),n+=e.slice(1),n+="RangeWillChange",RangeWillChangeListenersSpecificHandlerMethodName.set(e,n)),this.specificHandlerMethodName=n,this}function RangeChanges(){throw new Error("Can't construct. RangeChanges is a mixin.")}var WeakMap=require("weak-map"),Map=require("../_map"),ChangeDescriptor=require("./change-descriptor"),ObjectChangeDescriptor=ChangeDescriptor.ObjectChangeDescriptor,ChangeListenersRecord=ChangeDescriptor.ChangeListenersRecord,ListenerGhost=ChangeDescriptor.ListenerGhost,rangeChangeDescriptors=new WeakMap;RangeChangeDescriptor.prototype=new ObjectChangeDescriptor,RangeChangeDescriptor.prototype.constructor=RangeChangeDescriptor,RangeChangeDescriptor.prototype.changeListenersRecordConstructor=RangeChangeListenersRecord,RangeChangeDescriptor.prototype.willChangeListenersRecordConstructor=RangeWillChangeListenersRecord,Object.defineProperty(RangeChangeDescriptor.prototype,"active",{get:function(){return this._active||(this._active=this._current?this._current.slice():[])}});var RangeChangeListenersSpecificHandlerMethodName=new Map;RangeChangeListenersRecord.prototype=new ChangeListenersRecord,RangeChangeListenersRecord.prototype.constructor=RangeChangeListenersRecord;var RangeWillChangeListenersSpecificHandlerMethodName=new Map;RangeWillChangeListenersRecord.prototype=new ChangeListenersRecord,RangeWillChangeListenersRecord.prototype.constructor=RangeWillChangeListenersRecord,module.exports=RangeChanges,RangeChanges.prototype.getAllRangeChangeDescriptors=function(){return rangeChangeDescriptors.has(this)||rangeChangeDescriptors.set(this,new Map),rangeChangeDescriptors.get(this)},RangeChanges.prototype.getRangeChangeDescriptor=function(e){var n=this.getAllRangeChangeDescriptors();return e=e||"",n.has(e)||n.set(e,new RangeChangeDescriptor(e)),n.get(e)};var ObjectsDispatchesRangeChanges=new WeakMap,dispatchesRangeChangesGetter=function(){return ObjectsDispatchesRangeChanges.get(this)},dispatchesRangeChangesSetter=function(e){return ObjectsDispatchesRangeChanges.set(this,e)},dispatchesChangesMethodName="dispatchesRangeChanges",dispatchesChangesPropertyDescriptor={get:dispatchesRangeChangesGetter,set:dispatchesRangeChangesSetter,configurable:!0,enumerable:!1};RangeChanges.prototype.addRangeChangeListener=function(e,n,t){!this.isObservable&&this.makeObservable&&this.makeObservable();var r,a=this.getRangeChangeDescriptor(n);r=t?a.willChangeListeners:a.changeListeners,r._current?Array.isArray(r._current)?r._current.push(e):r._current=[r._current,e]:r._current=e,void 0===Object.getOwnPropertyDescriptor(this.__proto__||Object.getPrototypeOf(this),dispatchesChangesMethodName)&&Object.defineProperty(this.__proto__||Object.getPrototypeOf(this),dispatchesChangesMethodName,dispatchesChangesPropertyDescriptor),this.dispatchesRangeChanges=!0;var s=this;return function(){s&&(s.removeRangeChangeListener(e,n,t),s=null)}},RangeChanges.prototype.removeRangeChangeListener=function(e,n,t){var r,a=this.getRangeChangeDescriptor(n);if(r=t?a._willChangeListeners:a._changeListeners,r._current)if(r._current===e)r._current=null;else{var s=r._current.lastIndexOf(e);if(s===-1)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(n));a.isActive?(r.ghostCount=r.ghostCount+1,r._current[s]=ListenerGhost):r._current.spliceOne(s)}},RangeChanges.prototype.dispatchRangeChange=function(e,n,t,r){var a=this.getAllRangeChangeDescriptors();a.dispatchBeforeChange=r,a.forEach(function(a,s,i){if(!a.isActive){var h=r?a._willChangeListeners:a._changeListeners;if(h&&h._current){var g=h.specificHandlerMethodName;if(Array.isArray(h._current)){if(h._current.length){a.isActive=!0;try{var o,c,p,C=h.removeCurrentGostListenersIfNeeded(),l=ListenerGhost;for(o=0,c=C.length;o<c;o++)if((p=C[o])!==l)if(p[g])p[g](e,n,t,this,r);else{if(!p.call)throw new Error("Handler "+p+" has no method "+g+" and is not callable");p.call(this,e,n,t,this,r)}}finally{a.isActive=!1}}}else{a.isActive=!0;try{if(p=h._current,p[g])p[g](e,n,t,this,r);else{if(!p.call)throw new Error("Handler "+p+" has no method "+g+" and is not callable");p.call(this,e,n,t,this,r)}}finally{a.isActive=!1}}}}},this)},RangeChanges.prototype.addBeforeRangeChangeListener=function(e,n){return this.addRangeChangeListener(e,n,!0)},RangeChanges.prototype.removeBeforeRangeChangeListener=function(e,n){return this.removeRangeChangeListener(e,n,!0)},RangeChanges.prototype.dispatchBeforeRangeChange=function(e,n,t){return this.dispatchRangeChange(e,n,t,!0)};
},{"../_map":4,"./change-descriptor":11,"weak-map":22}],14:[function(require,module,exports){
"use strict";function define(e,t){Object.defineProperty(Array.prototype,e,{value:t,writable:!0,configurable:!0,enumerable:!1})}function ArrayIterator(e,t,r){this.array=e,this.start=null==t?0:t,this.end=r}var Function=require("./shim-function"),GenericCollection=require("./generic-collection"),GenericOrder=require("./generic-order"),WeakMap=require("weak-map");module.exports=Array;var array_splice=Array.prototype.splice,array_slice=Array.prototype.slice;Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(e){var t=[];return t.addEach(e),t},Array.unzip=function(e){for(var t=[],r=1/0,i=0;i<e.length;i++){var n=e[i];e[i]=n.toArray(),n.length<r&&(r=n.length)}for(var i=0;i<e.length;i++)for(var n=e[i],o=0;o<n.length;o++)o<r&&o in n&&(t[o]=t[o]||[],t[o][i]=n[o]);return t},define("addEach",GenericCollection.prototype.addEach),define("deleteEach",GenericCollection.prototype.deleteEach),define("toArray",GenericCollection.prototype.toArray),define("toObject",GenericCollection.prototype.toObject),define("all",GenericCollection.prototype.all),define("any",GenericCollection.prototype.any),define("min",GenericCollection.prototype.min),define("max",GenericCollection.prototype.max),define("sum",GenericCollection.prototype.sum),define("average",GenericCollection.prototype.average),define("only",GenericCollection.prototype.only),define("flatten",GenericCollection.prototype.flatten),define("zip",GenericCollection.prototype.zip),define("enumerate",GenericCollection.prototype.enumerate),define("group",GenericCollection.prototype.group),define("sorted",GenericCollection.prototype.sorted),define("reversed",GenericCollection.prototype.reversed),define("constructClone",function(e){var t=new this.constructor;return t.addEach(e),t}),define("has",function(e,t){return this.find(e,t)!==-1}),define("get",function(e,t){if(+e!==e)throw new Error("Indicies must be numbers");return!e in this?t:this[e]}),define("set",function(e,t){return this[e]=t,!0}),define("add",function(e){return this.push(e),!0}),define("delete",function(e,t){var r=this.find(e,t);return r!==-1&&(this.spliceOne(r),!0)}),define("deleteAll",function(e,t){t=t||this.contentEquals||Object.equals;for(var r=0,i=0;i<this.length;)t(e,this[i])?(this.swap(i,1),r++):i++;return r}),define("find",function(e,t){t=t||this.contentEquals||Object.equals;for(var r=0;r<this.length;r++)if(r in this&&t(e,this[r]))return r;return-1}),define("findLast",function(e,t){t=t||this.contentEquals||Object.equals;var r=this.length;do if(r--,r in this&&t(this[r],e))return r;while(r>0);return-1}),define("swap",function(e,t,r){var i,n,o,a,l;if(e>this.length&&(this.length=e),"undefined"!=typeof r){if(i=[e,t],Array.isArray(r)||(r=array_slice.call(r)),o=0,n=r.length,n<1e3){for(o;o<n;o++)i[o+2]=r[o];return array_splice.apply(this,i)}for(l=array_splice.apply(this,i),o;o<n;){for(i=[e+o,0],a=2;a<1002&&o<n;a++,o++)i[a]=r[o];array_splice.apply(this,i)}return l}return"undefined"!=typeof t?array_splice.call(this,e,t):"undefined"!=typeof e?array_splice.call(this,e):[]}),define("peek",function(){return this[0]}),define("poke",function(e){this.length>0&&(this[0]=e)}),define("peekBack",function(){if(this.length>0)return this[this.length-1]}),define("pokeBack",function(e){this.length>0&&(this[this.length-1]=e)}),define("one",function(){for(var e in this)if(Object.owns(this,e))return this[e]}),Array.prototype.clear||define("clear",function(){return this.length=0,this}),define("compare",function(e,t){t=t||Object.compare;var r,i,n,o,a;if(this===e)return 0;if(!e||!Array.isArray(e))return GenericOrder.prototype.compare.call(this,e,t);for(i=this.length<e.length?this.length:e.length,r=0;r<i;r++)if(r in this){if(!(r in e))return-1;if(n=this[r],o=e[r],a=t(n,o))return a}else if(r in e)return 1;return this.length-e.length}),define("equals",function(e,t){t=t||Object.equals;var r,i,n=0,o=this.length;if(this===e)return!0;if(!e||!Array.isArray(e))return GenericOrder.prototype.equals.call(this,e);if(o!==e.length)return!1;for(;n<o;++n)if(n in this){if(!(n in e))return!1;if(r=this[n],i=e[n],!t(r,i))return!1}else if(n in e)return!1;return!0}),define("clone",function(e,t){if(null==e)e=1/0;else if(0===e)return this;if(t=t||new WeakMap,t.has(this))return t.get(this);var r=new Array(this.length);t.set(this,r);for(var i in this)r[i]=Object.clone(this[i],e-1,t);return r}),define("iterate",function(e,t){return new ArrayIterator(this,e,t)}),void 0===Array.prototype.spliceOne&&define("spliceOne",function(e,t){var r=this.length;if(r)if(1===arguments.length){for(;e<r;)this[e]=this[e+1],e++;this.length--}else this[e]=t}),define("Iterator",ArrayIterator),ArrayIterator.prototype.__iterationObject=null,Object.defineProperty(ArrayIterator.prototype,"_iterationObject",{get:function(){return this.__iterationObject||(this.__iterationObject={done:!1,value:null})}}),ArrayIterator.prototype.next=function(){return this.start===(null==this.end?this.array.length:this.end)?(this._iterationObject.done=!0,this._iterationObject.value=void 0):this._iterationObject.value=this.array[this.start++],this._iterationObject};
},{"./generic-collection":6,"./generic-order":8,"./shim-function":15,"weak-map":22}],15:[function(require,module,exports){
module.exports=Function,Function.noop=function(){},Function.identity=function(n){return n},Function.by=function(n,t){t=t||Object.compare,n=n||Function.identity;var o=function(o,u){return t(n(o),n(u))};return o.compare=t,o.by=n,o},Function.get=function(n){return function(t){return Object.get(t,n)}};
},{}],16:[function(require,module,exports){
"use strict";var WeakMap=require("weak-map");module.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(e){return Object(e)===e},Object.getValueOf=function(e){return e&&"function"==typeof e.valueOf&&(e=e.valueOf()),e};var hashMap=new WeakMap;Object.hash=function(e){return e&&"function"==typeof e.hash?""+e.hash():Object(e)===e?(hashMap.has(e)||hashMap.set(e,Math.random().toString(36).slice(2)),hashMap.get(e)):""+e};var owns=Object.prototype.hasOwnProperty;Object.owns=function(e,t){return owns.call(e,t)},Object.has=function(e,t){if("object"!=typeof e)throw new Error("Object.has can't accept non-object: "+typeof e);if(e&&"function"==typeof e.has)return e.has(t);if("string"==typeof t)return t in e&&e[t]!==Object.prototype[t];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(e,t,r){if("object"!=typeof e)throw new Error("Object.get can't accept non-object: "+typeof e);return e&&"function"==typeof e.get?e.get(t,r):Object.has(e,t)?e[t]:r},Object.set=function(e,t,r){e&&"function"==typeof e.set?e.set(t,r):e[t]=r},Object.addEach=function(e,t,r){var n=3!==arguments.length||r;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var c=0;c<t.length;c++)e[c]=t[c];else for(var o,f=Object.keys(t),a=0;o=f[a];a++)!n&&Object.owns(e,o)||(e[o]=t[o]);else t.isMap===!0?t.forEach(function(t,r){e[r]=t}):t.forEach(function(t){e[t[0]]=t[1]});else;return e},Object.defineEach=function(e,t,r,n,c,o){var f=3!==arguments.length||r;if(t)if("function"!=typeof t.forEach||t.hasOwnProperty("forEach"))if("number"==typeof t.length)for(var a=0;a<t.length;a++)Object.defineProperty(e,a,{value:t[a],writable:o,configurable:n,enumerable:c});else for(var i,u=Object.keys(t),b=0;i=u[b];b++)!f&&Object.owns(e,i)||Object.defineProperty(e,i,{value:t[i],writable:o,configurable:n,enumerable:c});else t.isMap===!0?t.forEach(function(t,r){Object.defineProperty(e,r,{value:t,writable:o,configurable:n,enumerable:c})}):t.forEach(function(t){Object.defineProperty(e,t[0],{value:t[1],writable:o,configurable:n,enumerable:c})});else;return e},Object.forEach=function(e,t,r){for(var n,c=Object.keys(e),o=0;n=c[o];o++)t.call(r,e[n],n,e)},Object.map=function(e,t,r){for(var n,c=Object.keys(e),o=0,f=[];n=c[o];o++)f.push(t.call(r,e[n],n,e));return f},Object.values=function(e){return Object.map(e,Function.identity)},Object.concat=function(){for(var e={},t=0;t<arguments.length;t++)Object.addEach(e,arguments[t]);return e},Object.from=Object.concat,Object.is=function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t},Object.equals=function(e,t,r,n){if(r=r||Object.equals,e=Object.getValueOf(e),t=Object.getValueOf(t),e===t)return!0;if(Object.isObject(e)){if(n=n||new WeakMap,n.has(e))return!0;n.set(e,!0)}if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,r,n);if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,r,n);if(Object.isObject(e)&&Object.isObject(t)&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){for(var c in e)if(!r(e[c],t[c],r,n))return!1;for(var c in t)if(!(c in e&&r(t[c],e[c],r,n)))return!1;return!0}return e!==e&&t!==t||(!e||!t)&&e===t},Object.compare=function(e,t){if(e=Object.getValueOf(e),t=Object.getValueOf(t),e===t)return 0;var r=typeof e,n=typeof t;return"number"===r&&"number"===n?e-t:"string"===r&&"string"===n?e<t?-(1/0):1/0:e&&"function"==typeof e.compare?e.compare(t):t&&"function"==typeof t.compare?-t.compare(e):0},Object.clone=function(e,t,r){if(e=Object.getValueOf(e),r=r||new WeakMap,void 0===t)t=1/0;else if(0===t)return e;if(Object.isObject(e)){if(!r.has(e))if(e&&"function"==typeof e.clone)r.set(e,e.clone(t,r));else{var n=Object.getPrototypeOf(e);if(null!==n&&n!==Object.prototype)throw new Error("Can't clone "+e);var c=Object.create(n);r.set(e,c);for(var o in e)c[o]=Object.clone(e[o],t-1,r)}return r.get(e)}return e},Object.clear=function(e){if(e&&"function"==typeof e.clear)e.clear();else for(var t=Object.keys(e),r=t.length;r;)r--,delete e[t[r]];return e};
},{"weak-map":22}],17:[function(require,module,exports){
if(!RegExp.escape){var special=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(e){return e.replace(special,"\\$&")}}
},{}],18:[function(require,module,exports){
var Array=require("./shim-array"),Object=require("./shim-object"),Function=require("./shim-function"),RegExp=require("./shim-regexp");
},{"./shim-array":14,"./shim-function":15,"./shim-object":16,"./shim-regexp":17}],19:[function(require,module,exports){
"use strict";function SortedArray(r,t,e,a){return this instanceof SortedArray?(Array.isArray(r)?(this.array=r,r=r.splice(0,r.length)):this.array=[],this.contentEquals=t||Object.equals,this.contentCompare=e||Object.compare,this.getDefault=a||Function.noop,this.length=0,void this.addEach(r)):new SortedArray(r,t,e,a)}function search(r,t,e){for(var a=0,n=r.length-1;a<=n;){var o=a+n>>1,s=e(t,r[o]);if(s>0)a=o+1;else{if(!(s<0))return o;n=o-1}}return-(a+1)}function searchFirst(r,t,e,a){var n=search(r,t,e);if(n<0)return-1;for(;n>0&&a(t,r[n-1]);)n--;return a(t,r[n])?n:-1}function searchLast(r,t,e,a){var n=search(r,t,e);if(n<0)return-1;for(;n<r.length-1&&a(t,r[n+1]);)n++;return a(t,r[n])?n:-1}function searchForInsertionIndex(r,t,e){var a=search(r,t,e);if(a<0)return-a-1;for(var n=r.length-1;a<n&&0===e(t,r[a+1]);)a++;return a}module.exports=SortedArray;var Shim=require("./shim"),GenericCollection=require("./generic-collection"),PropertyChanges=require("./listen/property-changes"),RangeChanges=require("./listen/range-changes");SortedArray.SortedArray=SortedArray,SortedArray.from=GenericCollection.from,Object.addEach(SortedArray.prototype,GenericCollection.prototype),Object.addEach(SortedArray.prototype,PropertyChanges.prototype),Object.addEach(SortedArray.prototype,RangeChanges.prototype),SortedArray.prototype.isSorted=!0,SortedArray.prototype.constructClone=function(r){return new this.constructor(r,this.contentEquals,this.contentCompare,this.getDefault)},SortedArray.prototype.has=function(r,t){if(t)throw new Error("SortedSet#has does not support second argument: equals");var e=search(this.array,r,this.contentCompare);return e>=0&&this.contentEquals(this.array[e],r)},SortedArray.prototype.get=function(r,t){if(t)throw new Error("SortedArray#get does not support second argument: equals");var e=searchFirst(this.array,r,this.contentCompare,this.contentEquals);return e!==-1?this.array[e]:this.getDefault(r)},SortedArray.prototype.add=function(r){var t=searchForInsertionIndex(this.array,r,this.contentCompare);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([r],Array.empty,t),this.array.splice(t,0,r),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([r],Array.empty,t),!0},SortedArray.prototype.delete=function(r,t){if(t)throw new Error("SortedArray#delete does not support second argument: equals");var e=searchFirst(this.array,r,this.contentCompare,this.contentEquals);return e!==-1&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(Array.empty,[r],e),this.array.spliceOne(e),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,[r],e),!0)},SortedArray.prototype.deleteAll=function(r,t){if(t){var e=this.array.deleteAll(r,t);return this.length-=e,e}var a=searchFirst(this.array,r,this.contentCompare,this.contentEquals);if(a!==-1){for(var n=a;this.contentEquals(r,this.array[n]);)n++;var o=this.slice(a,n);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(Array.empty,o,a),this.array.splice(a,o.length),this.length-=o.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,o,a),o.length}return 0},SortedArray.prototype.indexOf=function(r){return searchFirst(this.array,r,this.contentCompare,this.contentEquals)},SortedArray.prototype.lastIndexOf=function(r){return searchLast(this.array,r,this.contentCompare,this.contentEquals)},SortedArray.prototype.find=function(r,t,e){if(t)throw new Error("SortedArray#find does not support second argument: equals");if(e)throw new Error("SortedArray#find does not support third argument: index");return searchFirst(this.array,r,this.contentCompare,this.contentEquals)},SortedArray.prototype.findLast=function(r,t,e){if(t)throw new Error("SortedArray#findLast does not support second argument: equals");if(e)throw new Error("SortedArray#findLast does not support third argument: index");return searchLast(this.array,r,this.contentCompare,this.contentEquals)},SortedArray.prototype.push=function(){this.addEach(arguments)},SortedArray.prototype.unshift=function(){this.addEach(arguments)},SortedArray.prototype.pop=function(){var r=this.array.pop();return this.length=this.array.length,r},SortedArray.prototype.shift=function(){var r=this.array.shift();return this.length=this.array.length,r},SortedArray.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)},SortedArray.prototype.splice=function(r,t){return this.swap(r,t,Array.prototype.slice.call(arguments,2))},SortedArray.prototype.swap=function(r,t,e){if(void 0===r&&void 0===t)return Array.empty;r=r||0,r<0&&(r+=this.length),void 0===t&&(t=1/0);var a=this.slice(r,r+t);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(e,a,r),this.array.splice(r,t),this.length-=a.length,this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,a,r),this.addEach(e),a},SortedArray.prototype.reduce=function(r,t){var e=arguments[2];return this.array.reduce(function(t,a,n){return r.call(e,t,a,n,this)},t,this)},SortedArray.prototype.reduceRight=function(){var r=arguments[2];return this.array.reduceRight(function(t,e,a){return callback.call(r,t,e,a,this)},basis,this)},SortedArray.prototype.min=function(){if(this.length)return this.array[0]},SortedArray.prototype.max=function(){if(this.length)return this.array[this.length-1]},SortedArray.prototype.one=function(){return this.array.one()},SortedArray.prototype.clear=function(){var r;this.dispatchesRangeChanges&&(r=this.array.slice(),this.dispatchBeforeRangeChange(Array.empty,r,0)),this.length=0,this.array.clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange(Array.empty,r,0)},SortedArray.prototype.equals=function(r,t){return this.array.equals(r,t)},SortedArray.prototype.compare=function(r,t){return this.array.compare(r,t)},SortedArray.prototype.iterate=function(r,t){return new this.Iterator(this.array,r,t)},SortedArray.prototype.toJSON=function(){return this.toArray()},SortedArray.prototype.Iterator=Array.prototype.Iterator;
},{"./generic-collection":6,"./listen/property-changes":12,"./listen/range-changes":13,"./shim":18}],20:[function(require,module,exports){
"use strict";function TreeLog(){}module.exports=TreeLog,TreeLog.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},TreeLog.unicodeRound={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"╭",fromAbove:"╰",fromBoth:"┣",strafe:"┃"},TreeLog.unicodeSharp={intersection:"╋",through:"━",branchUp:"┻",branchDown:"┳",fromBelow:"┏",fromAbove:"┗",fromBoth:"┣",strafe:"┃"};
},{}],21:[function(require,module,exports){
(function (global){
module.exports=void 0!==global.WeakMap?global.WeakMap:require("weak-map");
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"weak-map":22}],22:[function(require,module,exports){
!function(){"use strict";function e(t){t.permitHostObjects___&&t.permitHostObjects___(e)}function t(e){return!(e.substr(0,_.length)==_&&"___"===e.substr(e.length-3))}function n(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[p];if(t&&t.key===e)return t;if(l(e)){t={key:e};try{return s(e,p,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function r(e){return e.prototype=null,Object.freeze(e)}function o(){d||"undefined"==typeof console||(d=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=e);var a=!1;if("function"==typeof WeakMap){var i=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var u=new i,f=Object.freeze({});if(u.set(f,1),1===u.get(f))return void(module.exports=WeakMap);a=!0}}var c=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),s=Object.defineProperty,l=Object.isExtensible,_="weakmap:",p=_+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var b=new ArrayBuffer(25),v=new Uint8Array(b);crypto.getRandomValues(v),p=_+"rand:"+Array.prototype.map.call(v,function(e){return(e%36).toString(36)}).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(e){return c(e).filter(t)}}),"getPropertyNames"in Object){var y=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(e){return y(e).filter(t)}})}!function(){var e=Object.freeze;s(Object,"freeze",{value:function(t){return n(t),e(t)}});var t=Object.seal;s(Object,"seal",{value:function(e){return n(e),t(e)}});var r=Object.preventExtensions;s(Object,"preventExtensions",{value:function(e){return n(e),r(e)}})}();var d=!1,O=0,g=function(){function e(e,t){var r,o=n(e);return o?c in o?o[c]:t:(r=u.indexOf(e),r>=0?f[r]:t)}function t(e){var t=n(e);return t?c in t:u.indexOf(e)>=0}function a(e,t){var r,o=n(e);return o?o[c]=t:(r=u.indexOf(e),r>=0?f[r]=t:(r=u.length,f[r]=t,u[r]=e)),this}function i(e){var t,r,o=n(e);return o?c in o&&delete o[c]:(t=u.indexOf(e),!(t<0)&&(r=u.length-1,u[t]=void 0,f[t]=f[r],u[t]=u[r],u.length=r,f.length=r,!0))}this instanceof g||o();var u=[],f=[],c=O++;return Object.create(g.prototype,{get___:{value:r(e)},has___:{value:r(t)},set___:{value:r(a)},delete___:{value:r(i)}})};g.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof i?!function(){function t(){function t(e,t){return s?c.has(e)?c.get(e):s.get___(e,t):c.get(e,t)}function n(e){return c.has(e)||!!s&&s.has___(e)}function u(e){var t=!!c.delete(e);return s?s.delete___(e)||t:t}this instanceof g||o();var f,c=new i,s=void 0,l=!1;return f=a?function(e,t){return c.set(e,t),c.has(e)||(s||(s=new g),s.set(e,t)),this}:function(e,t){if(l)try{c.set(e,t)}catch(n){s||(s=new g),s.set___(e,t)}else c.set(e,t);return this},Object.create(g.prototype,{get___:{value:r(t)},has___:{value:r(n)},set___:{value:r(f)},delete___:{value:r(u)},permitHostObjects___:{value:r(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");l=!0})}})}a&&"undefined"!=typeof Proxy&&(Proxy=void 0),t.prototype=g.prototype,module.exports=t,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),module.exports=g)}}();
},{}],23:[function(require,module,exports){
"use strict";var CommandBuilderBase=function(){function e(){}return e}();module.exports=CommandBuilderBase;
},{}],24:[function(require,module,exports){
"use strict";var SortedArray=require("collections/sorted-array"),util=require("./Util"),DataColumn=function(){function t(t,e,n){if(void 0===t)throw new Error("cannot construct DataColumn without DataTable");this._name=e,this._keyPath=n,this._index=new SortedArray(void 0,util.createContentEquator(n),util.createContentComparer(n))}return t.prototype.getValue=function(t){return util.resolveKeyPath(this._keyPath,t)},t.prototype.setValue=function(t,e){},t.prototype.table=function(){return this._table},t.prototype.name=function(t){return void 0!==t?(this._name=t,this):this._name},t.prototype.keyPath=function(){return void 0===this._keyPath?this.name():this._keyPath},t}(),Item=function(){function t(t,e){this.key=t,this.index=e}return t}();module.exports=DataColumn;
},{"./Util":35,"collections/sorted-array":19}],25:[function(require,module,exports){
"use strict";var DataColumnCollection=function(){function t(t){if(void 0===t)throw new Error("Illegal DataColumnCollection constructor: expected DataTable as first argument");this._table=t,this._columns=new Array}return t.prototype.add=function(t){if(!(this._columns.indexOf(t)<0))throw new Error("Column '"+t.name()+"' already exists in collection");return this._columns.push(t),this},t.prototype.get=function(t){if("string"==typeof t)for(var o=0,n=this._columns;o<n.length;o++){var e=n[o];if(e.name()===t)return e}},t.prototype.remove=function(t){},t}();module.exports=DataColumnCollection;
},{}],26:[function(require,module,exports){
"use strict";var DataColumnConstraint;!function(t){t[t.PRIMARY_KEY=0]="PRIMARY_KEY",t[t.UNIQUE=1]="UNIQUE",t[t.INDEX=2]="INDEX"}(DataColumnConstraint||(DataColumnConstraint={})),module.exports=DataColumnConstraint;
},{}],27:[function(require,module,exports){
"use strict";var DataRelation=function(){function t(t,a,i){this._parent=t,this._child=a,this._operator=i}return t}();module.exports=DataRelation;
},{}],28:[function(require,module,exports){
"use strict";var DataRowState=require("./DataRowState"),DataRowVersion=require("./DataRowVersion"),Util_1=require("./Util"),DataRow=function(){function t(t,e){if(void 0===t)throw new Error("Cannot construct DataRow without DataTable");this._table=t,void 0!==e&&"object"==typeof e?this._original=Util_1.deepCopy(e):this._original=null}return t.prototype._createCurrent=function(){return this._original=this._original||null,Object.create(this._original)},t.prototype._createProposed=function(){if(this.rowState()===DataRowState.DELETED)throw new Error("Cannot create proposed after deleting row");return void 0===this._current&&(this._current=this._createCurrent()),Object.create(this._current)},t.prototype.get=function(t,e){switch(typeof t){case"string":var r=t;return this._getItemWithKey(r,e);case"object":var o=t;return this._getItemWithColumn(o,e)}},t.prototype.set=function(t,e,r){switch(typeof t){case"string":var o=t,i=e;return this._setItem(o,i,r);case"object":var n=t,r=e;return this._setItems(n,r)}},t.prototype.del=function(t){this._setItem(t,null)},t.prototype.has=function(t,e){var r=this._getVersion(e);for(var o in r)if(o==t)return!0;return!1},t.prototype.delete=function(t){this.isEditing()?this._proposed=null:this._current=null},t.prototype._getItemWithColumn=function(t,e){var r=this._getVersion(e);return void 0===r||null===r?void 0:t.getValue(r)},t.prototype._getItemWithKey=function(t,e){var r=this._getVersion(e);return void 0===r||null===r?void 0:r[t]},t.prototype._setItem=function(t,e,r){if(r===DataRowVersion.ORIGINAL)throw new Error("Cannot write to original version");if(this.rowState()===DataRowState.DELETED)throw new Error("Row already deleted");return this._getVersion(r)[t]=e,this},t.prototype._setItems=function(t,e){for(var r in t)this._setItem(r,t[r]);return this},t.prototype._getVersion=function(t){switch(void 0===t&&(t=DataRowVersion.DEFAULT),t){case DataRowVersion.DEFAULT:return this.isEditing()?this._proposed||(this._proposed=this._createProposed()):this._current||(this._current=this._createCurrent());case DataRowVersion.CURRENT:return this._current;case DataRowVersion.ORIGINAL:return this._original;case DataRowVersion.PROPOSED:return this._proposed;default:throw new Error("DataRowVersion {"+t+"} is not recognized")}},t.prototype._getColumn=function(t){return this.table().columns().get(t)},t.prototype.table=function(t){return void 0!==t?(null===t?this._table=void 0:this._table=t,this):this._table},t.prototype.rowState=function(){return void 0===this._table?DataRowState.DETACHED:null===this._original?DataRowState.ADDED:null===this._current?DataRowState.DELETED:void 0===this._current?DataRowState.UNCHANGED:DataRowState.MODIFIED},t.prototype.beginEdit=function(){if(this.isEditing())throw new Error("already editing");this._proposed=this._createProposed()},t.prototype.isEditing=function(){return!!this._proposed},t.prototype.endEdit=function(){this.dispatchBeforeRowChange();var t=this;Object.keys(this._proposed).forEach(function(e){t._current[e]=t._proposed[e]}),delete this._proposed,this.dispatchRowChange()},t.prototype.acceptChanges=function(){var t=Util_1.deepCopy(this._current);this._original=t,this._current=this._createCurrent()},t.prototype.rejectChanges=function(){this._current=this._createCurrent()},t.prototype.dispatchRowChange=function(){},t.prototype.dispatchBeforeRowChange=function(){},t}();module.exports=DataRow;
},{"./DataRowState":30,"./DataRowVersion":31,"./Util":35}],29:[function(require,module,exports){
"use strict";var SortedArray=require("collections/sorted-array"),DataRowCollection=function(){function t(t){if(void 0===t)throw new Error("Illegal DataRowCollection constructor: expected DataTable as first argument");this._table=t,this._rows=new SortedArray}return t.prototype.add=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];this._rows.addEach(t)},t.prototype.toArray=function(){return this._rows.toArray()},t}();module.exports=DataRowCollection;
},{"collections/sorted-array":19}],30:[function(require,module,exports){
"use strict";var DataRowState;!function(D){D[D.DETACHED=1]="DETACHED",D[D.UNCHANGED=2]="UNCHANGED",D[D.ADDED=4]="ADDED",D[D.MODIFIED=8]="MODIFIED",D[D.DELETED=16]="DELETED"}(DataRowState||(DataRowState={})),module.exports=DataRowState;
},{}],31:[function(require,module,exports){
"use strict";var DataRowVersion;!function(R){R[R.ORIGINAL=0]="ORIGINAL",R[R.CURRENT=1]="CURRENT",R[R.PROPOSED=2]="PROPOSED",R[R.DEFAULT=3]="DEFAULT"}(DataRowVersion||(DataRowVersion={})),module.exports=DataRowVersion;
},{}],32:[function(require,module,exports){
"use strict";var DataTable=require("./DataTable"),ds_counter=0,dt_counter=0,DataSet=function(){function t(t){++ds_counter,this._name=t||"Set "+ds_counter,this._tables=[],this._relations=[]}return t.prototype.tables=function(){return this._tables.slice()},t.prototype.newTable=function(t){return++dt_counter,t=t||"Table "+dt_counter,new DataTable(t)},t.prototype.addTable=function(t){var e;if("string"==typeof t)e=this.newTable(t);else{if(!(t instanceof DataTable))throw new TypeError("Cannot add table: "+t);e=t}this._tables.push(e)},t.prototype.acceptChanges=function(){this._tables.forEach(function(t){t.acceptChanges()})},t.prototype.getChanges=function(){},t.prototype.name=function(t){return void 0!=t&&(this._name=t),this._name},t}();module.exports=DataSet;
},{"./DataTable":33}],33:[function(require,module,exports){
"use strict";var DataColumnCollection=require("./DataColumnCollection"),DataRowCollection=require("./DataRowCollection"),Util_1=require("./Util"),DataTable=function(){function t(t,o){this._name=t,this._rows=new DataRowCollection(this),this._columns=new DataColumnCollection(this),this._keyPath=o,this._keyComparer=Util_1.createContentComparer(o)}return t.prototype.name=function(t){return void 0!==t?(this._name=t,this):this._name},t.prototype.rows=function(){return this._rows},t.prototype.columns=function(){return this._columns},t.prototype.keyPath=function(){return this._keyPath},t.prototype.acceptChanges=function(){this._rows.toArray().forEach(function(t){t.acceptChanges()})},t}();module.exports=DataTable;
},{"./DataColumnCollection":25,"./DataRowCollection":29,"./Util":35}],34:[function(require,module,exports){
"use strict";var DataView=function(){function t(){}return t}();module.exports=DataView;
},{}],35:[function(require,module,exports){
"use strict";function createContentComparer(e){return function(r,t){var o=resolveKeyPath(e,r),n=resolveKeyPath(e,t);return o<n?-1:o>n?1:0}}function createContentEquator(e){return function(r,t){var o=resolveKeyPath(e,r),n=resolveKeyPath(e,t);return o==n}}function compareKeys(e,r){return"undefined"!=typeof indexedDB?indexedDB.cmp(e,r):e<r?-1:e>r?1:0}function resolveKeyPath(e,r){e=e||"";var t=e.split(".");return resolveKeyPathArray(t,r)}function resolveKeyPathArray(e,r){return e.reduce(function(e,r){if(void 0!==e)return e[r]},r)}function resolveKeyPathFromDataRow(e,r){e=e||"";var t=e.split("."),o=t.shift(),n=r.get(o);return resolveKeyPathArray(t,n)}function createValueWithKeyPath(e,r){var t=r.split(".");return t.reduceRight(function(e,r,t,o){var n={};return n[r]=e,n},e)}function deepCopy(e){return"object"==typeof e?flattenPrototype(e):e}function flattenPrototype(e,r,t){if(null===e)return null;var o=Array.isArray(e)?[]:Object.create(null);t=Array.isArray(t)?t:new Array,r=r||10,t.indexOf(e)<0&&t.push(e);for(var n in e){var a=e[n];"object"==typeof a?t.indexOf(a)<0?o[n]=flattenPrototype(a,r-1,t):console.warn("circular reference in obj:"+e):o[n]=a}return o}exports.KeyedCollection=require("./util/KeyedCollection"),exports.createContentComparer=createContentComparer,exports.createContentEquator=createContentEquator,exports.compareKeys=compareKeys,exports.resolveKeyPath=resolveKeyPath,exports.resolveKeyPathArray=resolveKeyPathArray,exports.resolveKeyPathFromDataRow=resolveKeyPathFromDataRow,exports.createValueWithKeyPath=createValueWithKeyPath,exports.deepCopy=deepCopy,exports.flattenPrototype=flattenPrototype;
},{"./util/KeyedCollection":36}],36:[function(require,module,exports){
"use strict";var KeyedCollection=function(){function e(){}return e}();module.exports=KeyedCollection;
},{}],37:[function(require,module,exports){
"use strict";exports.DataSet=require("./core/DataSet"),exports.DataTable=require("./core/DataTable"),exports.DataView=require("./core/DataView"),exports.DataRow=require("./core/DataRow"),exports.DataRowCollection=require("./core/DataRowCollection"),exports.DataRowVersion=require("./core/DataRowVersion"),exports.DataRowState=require("./core/DataRowState"),exports.DataColumn=require("./core/DataColumn"),exports.DataColumnConstraint=require("./core/DataColumnConstraint"),exports.DataColumnCollection=require("./core/DataColumnCollection"),exports.DataRelation=require("./core/DataRelation"),exports.util=require("./core/Util"),exports.CommandBuilderBase=require("./adapter/CommandBuilderBase");
},{"./adapter/CommandBuilderBase":23,"./core/DataColumn":24,"./core/DataColumnCollection":25,"./core/DataColumnConstraint":26,"./core/DataRelation":27,"./core/DataRow":28,"./core/DataRowCollection":29,"./core/DataRowState":30,"./core/DataRowVersion":31,"./core/DataSet":32,"./core/DataTable":33,"./core/DataView":34,"./core/Util":35}]},{},[37])(37)
});


//# sourceMappingURL=arga.min.js.map